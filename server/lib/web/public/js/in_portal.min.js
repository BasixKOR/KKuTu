/*
 * Rule the words! KKuTu Online
 * Copyright (C) 2017 JJoriping (op@jjo.kr)
 * Copyright (C) 2017 PkPAI (admin@pkpai.kr)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program. If not, see <http://www.gnu.org/licenses/>.
 */

!function(){function r(){$.get("/servers",function(r){var a=0;e.list.empty(),s=r.list,r.list.forEach(function(r,s){var i,n=null===r?"x":"o",l="x"==n?"-":r+" / "+t,d=r/t*100;a+=r||0,"o"==n&&(d>=90?n="q":d>=80&&(n="p")),e.list.append(i=$("<div>").addClass("server").attr("id","server-"+s).append($("<div>").addClass("server-status ss-"+n)).append($("<div>").addClass("server-name").html(L["server_"+s])).append($("<div>").addClass("server-people graph").append($("<div>").addClass("graph-bar").width(d+"%")).append($("<label>").html(l))).append($("<div>").addClass("server-enter").html(L.serverEnter))),"x"!=n?i.on("click",function(r){location.href="/?server="+s}):i.children(".server-enter").html("-")}),e.total.html("&nbsp;"+L.TOTAL+" "+a+L.MN),e.refi.removeClass("fa-spin"),e.start.prop("disabled",!1)})}var e,s,t=100;$(document).ready(function(){e={list:$("#server-list"),total:$("#server-total"),start:$("#game-start"),ref:$("#server-refresh"),refi:$("#server-refresh>i")},$("#Background").attr("src","").addClass("jt-image").css({"background-color":"#141414"}),e.start.prop("disabled",!0).on("click",function(r){var e,a;if($("#account-info").html()==L.LOGIN)return $("#server-0").trigger("click");for(e=.9;e<1;e+=.01)for(a in s)if(s[a]<e*t)return void $("#server-"+a).trigger("click")}),e.ref.on("click",function(s){if(e.refi.hasClass("fa-spin"))return alert(L.serverWait);e.refi.addClass("fa-spin"),setTimeout(r,1e3)}),setInterval(function(){e.ref.trigger("click")},6e4),r()})}();
